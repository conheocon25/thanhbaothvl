<!DOCTYPE html>
<html lang="en">	
	<body>	
		<div metal:use-macro="mApplication.xhtml/PageBar"/>
		<div class="widget-box">			
				<table class="table table-striped table-hover">
					<thead>
						<tr>
							<th width="30px">STT</th>										
							<th align="left">Tên Chương Trình</th>
							<th align="left">Ngày Làm CT</th>
							<th width="30px">SL</th>
							<th align="left">Nội dung</th>										
							<th width="30px">Xóa</th>
						</tr>
					</thead>
				<tbody>
					<tr tal:repeat="Salarydaily SalarydailyAll">
						<td width="32" align="center">
							<div tal:content="repeat/Salarydaily/number" />
						</td>
						<td>							  
							<a  class="update-item" href="#DialogUpdateReward" data-toggle="modal" tal:attributes="alt Salarydaily/getId">
								<div tal:content="Salarydaily/getCategory/getName" />
							</a>
						</td>
						<td tal:content="Salarydaily/getDateWorkPrint" />
						<td tal:content="Salarydaily/getCount" />
						<td tal:content="structure Salarydaily/getContent" />
						<td>
							<a class="remove-item" href="#DialogDelSelected" data-toggle="modal" tal:attributes="alt Salarydaily/getId">
								<i class="glyphicons-remove_2"/>
							</a>							
						</td>
					</tr>
				</tbody>				
				</table>
				<div metal:use-macro="mApplication.xhtml/PageBar"/>				
		</div>	
		<script type="text/javascript">
		/*<![CDATA[*/			
			$('.PageClick').click(function(){
				var URL = $(this).attr('alt');				
				$("#RewardLoad").load(URL);
			});			
			$('.update-item').click(function(){				
				var url = "/object/load/Salarydaily/" + $(this).attr('alt');				
				$.getJSON(url, function(data){										
					$('#URLUpdateReward').attr('alt', data.id);
					$('#NCount').val(data.count);
					$('#DateWork').val(data.date_work);
					$('#IdCategory1').select2('val', data.id_category);					
					$('#ContentEdit').text(data.content);					
				});
			});
			
			$('#URLUpdateReward').click(function(e){				
				var IdTable = $("#CurrentTable").attr('alt');
				var Data = [];						
				Data[0] 	= $('#URLUpdateReward').attr('alt');
				Data[1] 	= $("#IdCategory1").val();
				Data[2] 	= $("#IdUser").attr('alt');					
				Data[3] 	= $("#ContentEdit").val();	
				Data[4] 	= $("#NCount").val();	
				Data[5] 	= $("#DateWork").val();	
				Data[6] 	= 'null';	
				Data[7] 	= '';
				
				$("#DialogUpdateReward").modal('hide');									
				var URL = "/object/upd/Salarydaily";
				$.ajax({
					type: "POST",
					data: {Data:Data},
					url: URL,
					success: function(msg){
						$("#RewardLoad").load("/thu-lao/reward/trang");
						$('#ContentEdit').text("");
						$("#DialogMsgBox").modal('show');
						$("#MsgBoxContent").html('Đã cập nhật thành công!');						
					}
				});
				
			});	
			
			$('#URLDelSelectedButton').click(function(e){
				var URL = "/object/del/Salarydaily/" + $('.remove-item').attr('alt');				
				$("#DialogDelSelected").modal('hide');				
				$.ajax({
					type: "POST",					
					url: URL,
					success: function(msg){
						$("#RewardLoad").load("/thu-lao/reward/trang");
						$("#DialogMsgBox").modal('show');
						$("#MsgBoxContent").html('Đã xóa dữ liệu thành công!');
					}
				});				
			});
		/*]]>*/
		</script>		
	</body>
</html>